---
import BaseHead from '../../components/BaseHead.astro';
import Footer from '../../components/Footer.astro';
import { SITE_TITLE, SITE_DESCRIPTION } from '../../consts';
import { getCollection } from 'astro:content';
import MainNavigation from '../../components/MainNavigation.astro';
import ThemeSwitcher from '../../components/ThemeSwitcher';
import BlogHeader from '../../components/BlogHeader.astro';

import "../../styles/blog.css";
import PostTeaser from '../../components/PostTeaser.astro';

const posts = (await getCollection('blog')).sort(
	(a, b) =>  b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---
<!DOCTYPE html>
<html lang="en" class="blogpost-list-page">
	<head>
		<BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
	</head>
	<body>
		<div class="blog-listing-wrapper">
			<aside class="blog-sidebar">
			  <div class="blog-header">
				<BlogHeader
				  spaceTitle="Blog"
				  spaceLink="/blog/"
				  isListing={true}
				/>
				<MainNavigation space={"blog"} />
			  </div>
			  <div class="blog-intro">
				Technical notes about machine learning, data science, math and
				software engineering. Recording what I learn everyday.
			  </div>
			  <div class="misc">
				<div class="theme-switcher">
				  <ThemeSwitcher />
				</div>
			  </div>
			</aside>
			<main
			  data-nosnippet=""
			  class={`blog-list blog-grid ${!posts.length ? "no-posts" : ""}`}
			>
			  {!posts.length && (
				<div class="no-posts-placeholder">
				  Great posts will be here as soon as my muse comes back to me &nbsp;
				  <span role="img" aria-label="magic will happen soon">
					ðŸ’«
				  </span> &nbsp;
				  <br />
				  Come back soon &nbsp;
				  <span aria-label="bye" role="img">
					ðŸ‘‹
				  </span>
				</div>
			  )}
			  {posts.map(
				(post) => (
				  <PostTeaser
					id={post.slug}
					title={post.data.title}
					slug={post.slug}
					excerpt={post.data.excerpt}
					pubDate={post.data.pubDate}
					cover={post.data.cover}
					keywords={post.data.keywords}
				  />
				)
			  )}
			</main>
			<div class="clearfix" />
		  </div>
		  <Footer />
		  <!-- <BreadcrumbsSnippet crumbs={[{ "/blog/": "Blog" }]} /> -->
	</body>
</html>
