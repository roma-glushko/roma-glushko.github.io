---
import { getCollection } from 'astro:content';

import MainNavigation from '@components/MainNavigation.astro';
import ThemeSwitcher from '@components/ThemeSwitcher';
import BlogHeader from '@components/BlogHeader.astro';
import PostTeaser from '@components/blog/PostTeaser.astro';
import BlogLayout from '@layouts/BlogLayout.astro';

import "../../styles/blog.css";

const posts = (await getCollection('blog')).sort(
	(a, b) =>  b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);

---
<BlogLayout
	title={"Blog"}
	description={"Technical blog about software engineering, machine learning, and data science"}
	keywords={[
		"technical blog",
		"software engineering blog",
		"machine learning blog",
		"math",
		"engineering",
		"data science",
		"roman glushko blog",
		"roma glushko blog",
	]}
>
		<main
		  data-nosnippet=""
		  class={`blog-list blog-grid ${!posts.length ? "no-posts" : ""}`}
		>
		  {!posts.length && (
			<div class="no-posts-placeholder">
			  Great posts will be here as soon as my muse comes back to me &nbsp;
			  <span role="img" aria-label="magic will happen soon">
				ðŸ’«
			  </span> &nbsp;
			  <br />
			  Come back soon &nbsp;
			  <span aria-label="bye" role="img">
				ðŸ‘‹
			  </span>
			</div>
		  )}
		  {posts.map(
			(post) => (
			  <PostTeaser post={post} />
			)
		  )}
		</main>
</BlogLayout>