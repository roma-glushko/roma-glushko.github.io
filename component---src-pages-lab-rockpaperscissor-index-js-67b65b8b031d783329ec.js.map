{"version":3,"sources":["webpack:///./src/components/theme/logo.js","webpack:///./src/components/theme/view-page-header.js","webpack:///./src/components/lab/rock-paper-scissor-game.js","webpack:///./src/pages/lab/rockpaperscissor/index.js"],"names":["Logo","data","className","fluid","placeholderImage","childImageSharp","ViewPageHeader","spaceTitle","spaceLink","to","RockPaperScissorGame","props","mountCameraStream","cameraElement","msHorizontalMirror","navigator","mediaDevices","getUserMedia","video","audio","then","stream","srcObject","setState","cameraStreamMounted","catch","error","console","log","onRoundStarted","isRoundStarted","roundCountdown","computerChoice","humanChoice","setTimeout","countDown","state","onRoundFinished","getHumanChoiceFrame","requestAnimationFrame","camera","current","makeComputerChoice","context","humanChoiceImage","getContext","translate","scale","drawImage","predictHumanChoice","videoFrame","scoreRound","Math","floor","random","choices","length","renderChoice","choiceIdx","React","createRef","humanScore","computerScore","componentDidMount","this","render","ref","playsInline","autoPlay","onClick","disabled","icon","faPlay","Component","RockPaperScissorPage","title","pagePath","ogType","description","keywords","space","id"],"mappings":"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","file":"component---src-pages-lab-rockpaperscissor-index-js-67b65b8b031d783329ec.js","sourcesContent":["import React from \"react\"\nimport { useStaticQuery, graphql } from \"gatsby\"\nimport Img from \"gatsby-image\"\n\n/*\n * This component is built using `gatsby-image` to automatically serve optimized\n * images with lazy loading and reduced file sizes. The image is loaded using a\n * `useStaticQuery`, which allows us to load the image from directly within this\n * component, rather than having to pass the image data down from pages.\n *\n * For more information, see the docs:\n * - `gatsby-image`: https://gatsby.dev/gatsby-image\n * - `useStaticQuery`: https://www.gatsbyjs.org/docs/use-static-query/\n */\n\nconst Logo = () => {\n  const data = useStaticQuery(graphql`\n    query {\n      placeholderImage: file(relativePath: { eq: \"homepage/photo.jpeg\" }) {\n        childImageSharp {\n          fluid(maxWidth: 160) {\n            ...GatsbyImageSharpFluid\n          }\n        }\n      }\n    }\n  `)\n\n  return <Img className=\"logo-img\" fluid={data.placeholderImage.childImageSharp.fluid} />\n}\n\nexport default Logo","import React from 'react'\nimport { Link } from \"gatsby\"\nimport Logo from \"../theme/logo\"\n\nimport \"./view-page-header.css\"\n\n// todo: refactor name of the component. This header is placed not only on the view pages but on the listings\n\nconst ViewPageHeader = ({ spaceTitle, spaceLink  }) => {\n  return (\n    <div className=\"view-page-header\">\n        <div className=\"view-page-header-wrapper\">\n          <div className=\"logo-wrapper\">\n              <div className=\"logo\">\n                  <Logo />\n              </div>\n              <div className=\"name\"><Link to=\"/blog/\">Roman <br /> Glushko</Link></div>\n          </div>\n          <h1 className=\"blog-title\"><Link to={spaceLink}>{spaceTitle}</Link></h1>\n        </div>\n    </div>\n  )\n}\n\nexport default ViewPageHeader","import React from 'react'\n\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome';\nimport { faPlay } from '@fortawesome/free-solid-svg-icons'\n\nimport './rock-paper-scissor-game.css'\n\nclass RockPaperScissorGame extends React.Component {\n  \n  constructor(props) {\n    super(props);\n    \n    this.choices = [\n      '✊',\n      '✋',\n      '✌️',\n    ]\n\n    this.camera = React.createRef();\n    this.humanChoiceImage = React.createRef();\n\n    this.state = {\n      cameraStreamMounted: false,\n      humanScore: 0,\n      computerScore: 0,\n      isRoundStarted: false,\n      roundCountdown: 3,\n      computerChoice: -1,\n      humanChoice: -1,\n    }\n  }\n \n  componentDidMount() {\n    this.mountCameraStream(this.camera.current)\n  }\n\n  // mount camera video stream to video element\n  mountCameraStream = (cameraElement) => {\n    cameraElement.msHorizontalMirror = true;\n\n    if (!navigator.mediaDevices.getUserMedia) {\n      console.log('No camera?')\n      return\n    }\n\n    navigator.mediaDevices.getUserMedia({ video: true, audio: false })\n      .then((stream) => {\n        cameraElement.srcObject = stream;\n\n        this.setState({\n          cameraStreamMounted: true,\n        })\n      })\n      .catch((error) => {\n        console.log(\"Something went wrong: \" + error);\n      })\n  }\n\n  onRoundStarted = () => {\n    this.setState({\n      isRoundStarted: true,\n      roundCountdown: 3,\n      computerChoice: -1,\n      humanChoice: -1,\n    })\n    \n    const countDown = () => {\n      if (this.state.roundCountdown >= 1) {\n        this.setState({\n          roundCountdown: this.state.roundCountdown - 1,\n        })\n\n        setTimeout(countDown, 1000);\n        return\n      }\n\n      this.onRoundFinished()\n    }\n\n    setTimeout(countDown, 1000)\n  }\n\n  onRoundFinished = () => {\n    this.getHumanChoiceFrame()\n\n    requestAnimationFrame(() => {\n      this.getHumanChoiceFrame(this.camera.current).then(() => {});\n    });\n\n    this.setState({\n      computerChoice: this.makeComputerChoice(),\n      isRoundStarted: false,\n    })\n  }\n\n  getHumanChoiceFrame = (cameraElement) => {\n    const canvasElement = this.humanChoiceImage.current\n\n    const context = canvasElement.getContext('2d');\n\n    context.translate(300, 0);\n    context.scale(-1, 1);\n\n    context.drawImage(cameraElement, 0, 0, 300, 300);\n\n    return cameraElement\n  }\n\n  predictHumanChoice = (videoFrame) => {\n    \n  }\n\n  // identify winner of this pair\n  scoreRound = (humanChoice, computerChoice) => {\n    \n  }\n\n  // pick randomly one of 3 possible states\n  makeComputerChoice = () => {\n    return Math.floor(Math.random() * this.choices.length)\n  }\n\n  renderChoice = (choiceIdx) => {\n    if (choiceIdx === -1) {\n      return \"\"\n    }\n\n    return this.choices[choiceIdx]\n  }\n\n  render() {\n    const {\n      humanScore, \n      computerScore,\n      cameraStreamMounted, \n      isRoundStarted, \n      roundCountdown,\n      computerChoice,\n      humanChoice,\n    } = this.state\n\n    return (\n    <div className=\"game\">\n      <div className=\"game-item\">\n        <div className=\"player\">\n          <canvas className=\"human-choice-image\" ref={this.humanChoiceImage}></canvas>\n        </div>\n      </div>\n      <div className=\"game-item\">\n        <div className=\"title\">🧠 You</div>\n        <div className=\"player human\">\n          <video ref={this.camera} className=\"video-background\" playsInline={true} autoPlay={true}>\n            No Video\n          </video>\n          {humanChoice !== -1 ? <div className=\"choice\">{this.renderChoice(humanChoice)}</div> : \"\"}\n        </div>\n      </div>\n      <div className=\"game-item controls\">\n        <div className=\"score\">\n          {humanScore} : {computerScore}\n        </div>\n        { !isRoundStarted ?\n          <button className=\"play\" onClick={this.onRoundStarted} disabled={!cameraStreamMounted}>\n            <FontAwesomeIcon icon={faPlay} /> Play\n          </button>\n          :\n          <div className=\"countdown\">{roundCountdown}</div>\n        }\n      </div>\n      <div className=\"game-item\">\n        <div className=\"title\">🤖 AI</div>\n        <div className=\"player computer\">\n          {computerChoice !== -1 ? <div className=\"choice\">{this.renderChoice(computerChoice)}</div> : \"\"}\n        </div>\n      </div>\n    </div>)\n  }\n}\n\nexport default RockPaperScissorGame","import React from \"react\"\n\nimport Layout from \"../../../components/theme/layout\"\nimport SEO from \"../../../components/seo\"\nimport ViewPageHeader from \"../../../components/theme/view-page-header\"\nimport MainNavigation from \"../../../components/theme/main-navigation\"\nimport NNBackground from \"../../../components/nn-design/nn-background.js\"\nimport Footer from \"../../../components/theme/footer\"\n\nimport RockPaperScissorGame from '../../../components/lab/rock-paper-scissor-game.js'\n\nimport \"./index.css\"\n\nconst RockPaperScissorPage = () => (\n    <Layout>\n      <SEO\n        title={\"Rock, Paper, Scissor - Lab\"}\n        className=\"experiment-view-page\"\n        pagePath='/lab/rockpaperscissor'\n        ogType=\"article\"\n        description=\"\"\n        keywords=\"\"\n      />\n        <header className=\"experiment-header\">\n          <ViewPageHeader spaceTitle=\"Lab\" spaceLink=\"/lab/\" />\n          <MainNavigation space={\"lab\"} />\n        </header>\n        {/** refactor NN background component */}\n        <div id=\"hero-header\" className=\"lab-header\">\n          <NNBackground />\n          <h1 className=\"title\">\n            Rock, Paper, Scissor <br />\n            <span className=\"experiment-category\">Computer Vision</span>\n          </h1>\n\n        </div>\n        <main className=\"rockpaperscissor-wrapper\">\n          <div className=\"into\">\n             \n          </div>\n          <RockPaperScissorGame />\n        </main>\n        <Footer />\n    </Layout>\n)\n\nexport default RockPaperScissorPage"],"sourceRoot":""}