<!DOCTYPE html><html lang="en" class="blogpost-view-page"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="theme-color" content="#ffffff"/><meta data-react-helmet="true" property="og:url" content="https://www.romaglushko.com/blog/nature-of-distributed-systems/"/><meta data-react-helmet="true" name="twitter:description" content="How distributed systems are different to single-node setups?"/><meta data-react-helmet="true" name="twitter:title" content="The Nature of Distributed Systems - Blog"/><meta data-react-helmet="true" name="twitter:creator" content="@roma_glushko"/><meta data-react-helmet="true" name="twitter:card" content="summary"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" property="og:title" content="The Nature of Distributed Systems - Blog"/><meta data-react-helmet="true" name="author" content="@roma_glushko"/><meta data-react-helmet="true" name="keywords" content="system design"/><meta data-react-helmet="true" name="description" property="og:description" content="How distributed systems are different to single-node setups?"/><meta data-react-helmet="true" name="image" property="og:image" content="https://www.romaglushko.com/static/95ef24b3227ac9169954fd4efee37f14/d5217/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg"/><link rel="stylesheet" href="/styles.a2eaa597432494bb449e.css"/><title data-react-helmet="true">The Nature of Distributed Systems - Blog by Roman Glushko</title><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BlogPosting","image":"/static/95ef24b3227ac9169954fd4efee37f14/d5217/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg","headline":"The Nature of Distributed Systems","dateCreated":"2021-07-20","datePublished":"2021-07-20","dateModified":"2021-07-20","inLanguage":"en-US","isFamilyFriendly":"true","author":{"@type":"Person","name":"Roman Glushko"},"publisher":{"@type":"Organization","name":"Roman Glushko's Website"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://www.romaglushko.com/blog/nature-of-distributed-systems/"},"keywords":["system design"],"genre":["machine learning","software engineering","science","deep learning","statistics"],"articleSection":"Technical Blog","articleBody":"\nThe Internet evolves rapidly. We started our own hardware servers, moved to managed hostings and now we have entered the era of cloud computing. The ever growing need to handle more and more traffic pushes us beyond the limits.\n\nAs a result, it's so natural nowadays to spin off a few instances on AWS or GCP and start building one's own SaaS service that will scale in a way we need. Perhaps, your infrastructure already has load balancing, a couple of nodes or a message queue which means you have already begun with building a distributed system.\n\nBut **what do we even know about distributed systems? Are they really different to simple single server setup?**\n\n`video: title: \"Welcome to the real world of distributed systems\": https://media.giphy.com/media/2u8vej0S5Mx7W/giphy.mp4`\n\nDespite all benefits, I feel like many people **underestimate challenges** that come out of the box with distributed setups. So our goal is to dig into the nature of distributed systems and improve our reasoning about them.\n\n## Single Server Setup\n\nThe Single server setup is when your application, database and files are served on the same physical or virtual server. It is a reasonable baseline and often you may never need more than that. We work a lot with this kind of system. Even our personal computers may be an example of the single-node systems.\n\nThis is probably how we can get in a situation when we tend to apply our single server mental model to think about distributed systems. However, distributed setup is a fundamentally different beast and it has four main differences:\n\n- **Latency** - when we have a single server, it's **CPU power and latency** we worry about. In distributed systems, our main concern is **network latency**.\n- **Memory Access** - in a single server, we have access to the **same memory space**, so it may be easier to write programs that interact with each other. You cannot get direct access from one server to another.\n- **Partial Failures** - both distributed and a single node systems have components that could fail. In the case of a single server, there may be either total failure of the server (OS crashes or failures on the ISP side) or partial failures of the applications installed on the server. Every single component in a distributed setup surely shares these problems. However, they become **undisguisable** from each other. Having more components only **increases the chance that some of them would be affected by some failures**.\n\nThese few differences are so significant that they effectively change the way we need to think and build distributed systems.\n\n## Beyond Single Server\n\nFrom the brief comparison it becomes clear that the role of the network is crucial in multi-server setups. In order to let services communicate with each other, they expose accessible APIs via standard protocols like:\n\n- REST\n- SOAP\n- RPC\n\nThis helps to overcome memory access limitations. Communication itself happens via network links and this is where the fun part starts.\n\n## Unreliable Network\n\nThe role of the network becomes significant in the distributed systems. The problem is that the network is not a reliable thing.\n\n`video: title: \"Welcome to the real world of distributed systems\": https://media.giphy.com/media/JzzLFXnZt4aiI/giphy.mp4`\n\nRequests over the network can fail and there are a lot of reasons for that. Your router may just stop working because of a software or hardware issue, your load balances may drop some requests your database cluster silently or maybe [someone just wants to cut your connection cable](https://techcrunch.com/2013/03/28/three-men-arrested-for-attempting-to-cut-undersea-internet-cable-in-egypt/). Wild nature [doesn't help you either](https://www.theguardian.com/technology/2014/aug/14/google-undersea-fibre-optic-cables-shark-attacks).\n\nIn other cases, your hardware may be partially faulty in a way that would slow down the whole nodes that it connects. So troubleshooting becomes time-consuming and painful.\n\nWhile people work on making networks reliable, there will probably always be a reason that causes the failure.\n\nEven if network links work well, it doesn't mean that we are safe.\n\nNetwork can be intercepted and the information may be **recorded, modified or fabricated**. This becomes an issue if transmitted information is confidential like PII or CC data.\n\n## Two Generals\n\nWork in an unreliable environment is a common problem of all distributed systems. It's being generally formulated as **Byzantine General’s Problem**.\n\nImagine there are a few armies with generals that besieged the city they want to capture. In order to successfully perform the campaign, they need to attack the city at the same time. Otherwise, their resources would not be enough and the city army would defeat them.\n\nThe only way generals can communicate is via messengers that have to bypass the enemy territory to deliver a message to another general.\n\n`video: title: \"Consensus\": https://media.giphy.com/media/XBLppkG4DwyKnplu1v/giphy.mp4`\n\nThe situation is complicated as messengers can be intercepted and the message can be fabricated. Also, both messengers and generals can be traitors that are the objective to fail the operation and save the city.\n\nGenerals and messengers need to agree on all messages that they send to each other in order to win the battle. This agreement is called **consensus**.\n\nIn a context of distributed systems, the consensus is important to synchronize the state of the system when it's distributed among several nodes.\n\n## Latency, Bandwidth and Transport Cost\n\nWhen two applications communicate on the same server, the communication latency is super small and close to zero. In contrast, communication over the network is a different story.\n\n`video: title: \"Latency in Matrix\": https://media.giphy.com/media/6xE1FNcorRInS/giphy.mp4`\n\nNetwork latency can be **a few orders of magnitude higher** than communication inside of the same memory space. Two computers from different parts of the world are connected via optical cables and the light is used to transmit information. So we seem to be pretty much limited to the speed of the light at this point. All of this tells us that latency is a new and important factor in distributed systems.\n\nAnother resource associated with communication over the network is **bandwidth**. Each network connection has a bandwidth limit and you cannot send a larger chunk of data over a unit of time via the network. This is especially important when you deal with file uploading and downloading like in Google Drive, Dropbox or even Netflix where you need to stream high-quality video files for millions of users over the globe.\n\nLatency and bandwidth are two main costs of information transportation. However, there are other ones. For example, you will definitely pay for the whole **network infrastructure** needed to make your communication possible. Even if that cost is hidden in the cloud provider tariffs.\n\nYet another cost is the CPU resource you spend on **serializing and deserializing** data as well as **the cost of TCP and HTTPS handshakes**. This is the cost we need to pay in order to transfer data between transportation to application layers. The same story goes for when we decide to **compress and decompress** data in order to speed up data transmission and optimize bandwidth.\n\nIn order to imagine all of this, let's take a look at [some measurements](http://www.cs.cornell.edu/projects/ladis2009/talks/dean-keynote-ladis2009.pdf) that were done in Google data centers a while ago. They still are useful when you compare them:\n\n- Main memory reference - 100ns\n- Compress 1KB with Zippy - 10,000ns (10 us)\n- Read 1 MB sequentially from memory - 250,000ns (250us)\n- Round trip within the same datacenter - 500,000ns (500 us)\n- Read 1 MB sequentially from 1 Gbps network - 10,000,000ns (10,000 us or 10 ms)\n- Read 1 MB sequentially from HDD - 30,000,000ns (30,000us or 30 ms)\n- Send packet CA -> Netherlands -> CA - 150,000,000ns (150,000us or 150ms)\n\nThis may be counterintuitive, but in some cases, **network communication may be faster than reading from disk**. Above we see that reading 1MB of data is a few times faster from 1Gbps network than from HDD.\n\n## CAP Theorem\n\nNetwork hardware and software are not the only unreliable components. We can easily imagine a situation when some of the connected nodes become faulty because of a broken hard drive or RAM stick. In such cases, there is a part of the distributed system that still works and another part that is failed. These situations are just inevitable.\n\nWhat can we do about it? We need to manage such failures and build system architectures around this fundamental problem. Such systems are called **fault-tolerant**.\n\n**CAP theorem** says that there are two logical ways to respond to the partial failure of the system:\n\n- keep part of the system outdated but **available** for other clients\n- lock the system until all nodes become **consistent** after the failure\n\n![CAP Theorem Visualized](./img/cap-theorem.png \"CAP Theorem Visualized\")\n\n<div class=\"image-title\">CAP Theorem Visualized (<a target=\"_blank\" rel=\"noopener\" href=\"https://www.researchgate.net/figure/Visualization-of-CAP-theorem_fig2_282679529\">source</a>)</div>\n\nThe most important is that **we cannot pick all three of these attributes: Consistency, Availability and Partial Failure Tolerance**.\n\nAnother interesting thing is the **Consistency-Availability** pair. Since partial failures are unavoidable, it's effectively not possible to implement this pair for distributed systems and it should be only possible in the case of a single-server setup.\n\nHowever, failures don't happen all the time and most of the time the system is in a fully functional state. That's why there is an addition to the CAP theorem called the **PACELC theorem**.\n\nPACELC theorem states that when there are **no partial failures** in the system, then a distributed system can **trade between latency and consistency**. In other words, in case you have a horizontally scaled cluster with a couple of nodes, then you can balance your system latency over consistency by choosing the number of nodes you need to have in sync when change happens. The change may be propagated with **a few nodes right away** and respond to the client after that. The rest of the nodes eventually become synced with this change over time. On the flip side, you can wait until **all nodes** get in sync and only then respond to the client. In the second case, we get a **strongly consistent** system, but with a **higher latency** comparing to the first case.\n\nBy choosing the number of nodes we want to have in sync when changes happen, we can specify **the level of consistency** of the system.\n\n## At Least Once Delivery\n\nYet another interesting implication of partial failures is that it's hard to **deliver messages exactly once every time**.\n\nWhen a client dispatches a message it transmits to the receiver, the receiver persists the message and respond by an acknowledge message back. This is a normal flow.\n\nLet's make it real by adding a partial failure. Now when the client sends a message and doesn't get a response in a reasonable amount of time. Maybe the receiver is down? Or there was a network failure? Or maybe the receiver is just overloaded at this time and slow down with response?\n\nThere is no way to distinguish these issues. The message we try to send may be really important like an order fulfilment request. We are better to be safe than sorry. So the client sends out one more message and waits again. We do this until we are sure that the message is received e.g. when we receive an ack message in response.\n\nHowever, at that point, the receiver may get **several duplicated messages**.\n\n`video: title: \"At least once delivery\": https://media.giphy.com/media/l41lRvFQYdlfvDTLG/giphy.mp4`\n\nFor this reason, we need to make sure that message workers have business logic that would not make the system state inconsistent in case of message duplications (e.g. customer is being charged a few times for the same order). Sometimes this property is called **idempotency**.\n\n## Summary\n\nI hope you noticed that designing distributed systems is a good fit for pessimists, because you always need to expect that system could partially fail at some point.\n\nOther than that, distributed systems have inherited complexity associated with their distributed nature. That's why you need to go building such a system if they are absolutely needed.\n\nThe distributed world is all about tradeoffs. You need to know and realize them to successfully build robust distributed systems.\n\n`video: title: \"Summary\": https://media.giphy.com/media/3o7btNhMBytxAM6YBa/giphy.mp4`\n\n## References\n\n- <a target=\"_blank\" rel=\"noopener\" href=\"https://www.infoq.com/presentations/distributed-systems-complexity-human-factor/\">Why Distributed Systems Are Hard</a>\n- <a target=\"_blank\" rel=\"noopener\" href=\"https://dl.acm.org/doi/pdf/10.5555/974938\">A Note on Distributed Computing</a>\n- <a target=\"_blank\" rel=\"noopener\" href=\"https://bravenewgeek.com/you-cannot-have-exactly-once-delivery/\">You Cannot Have Exactly-Once Delivery</a>\n- <a target=\"_blank\" rel=\"noopener\" href=\"https://bravenewgeek.com/understanding-consensus/\">Understanding Consensus</a>\n- <a target=\"_blank\" rel=\"noopener\" href=\"https://levelup.gitconnected.com/practical-understanding-of-flp-impossibility-for-distributed-consensus-8886e73cdfe5\">Practical Understanding of FLP Impossibility for Distributed Consensus</a>\n","wordcount":1942}</script><script data-react-helmet="true" type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Home","item":"https://www.romaglushko.com/"},{"@type":"ListItem","position":2,"name":"Blog","item":"https://www.romaglushko.com/blog/"},{"@type":"ListItem","position":3,"name":"The Nature of Distributed Systems","item":"https://www.romaglushko.com/blog/nature-of-distributed-systems/"}]}</script><link crossorigin="" href="https://utteranc.es" rel="preconnect"/><link crossorigin="" href="https://www.google-analytics.com" rel="preconnect"/><style>.gatsby-image-wrapper{position:relative;overflow:hidden}.gatsby-image-wrapper picture.object-fit-polyfill{position:static!important}.gatsby-image-wrapper img{bottom:0;height:100%;left:0;margin:0;max-width:none;padding:0;position:absolute;right:0;top:0;width:100%;object-fit:cover}.gatsby-image-wrapper [data-main-image]{opacity:0;transform:translateZ(0);transition:opacity .25s linear;will-change:opacity}.gatsby-image-wrapper-constrained{display:inline-block;vertical-align:top}</style><noscript><style>.gatsby-image-wrapper noscript [data-main-image]{opacity:1!important}.gatsby-image-wrapper [data-placeholder-image]{opacity:0!important}</style></noscript><script type="module">const e="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;e&&document.body.addEventListener("load",(function(e){const t=e.target;if(void 0===t.dataset.mainImage)return;if(void 0===t.dataset.gatsbyImageSsr)return;let a=null,n=t;for(;null===a&&n;)void 0!==n.parentNode.dataset.gatsbyImageWrapper&&(a=n.parentNode),n=n.parentNode;const o=a.querySelector("[data-placeholder-image]"),r=new Image;r.src=t.currentSrc,r.decode().catch((()=>{})).then((()=>{t.style.opacity=1,o&&(o.style.opacity=0,o.style.transition="opacity 500ms linear")}))}),!0);</script><link rel="icon" href="/favicon-32x32.png?v=edefe9cf4eecd3adaa05cc9b91928417" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=edefe9cf4eecd3adaa05cc9b91928417"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=edefe9cf4eecd3adaa05cc9b91928417"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=edefe9cf4eecd3adaa05cc9b91928417"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=edefe9cf4eecd3adaa05cc9b91928417"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=edefe9cf4eecd3adaa05cc9b91928417"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=edefe9cf4eecd3adaa05cc9b91928417"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=edefe9cf4eecd3adaa05cc9b91928417"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=edefe9cf4eecd3adaa05cc9b91928417"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v23/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/dancingscript/v23/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2"/><link rel="preload" as="font" type="font/woff2" crossorigin="anonymous" href="/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2"/><style>@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v23/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v23/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup8.woff2) format("woff2")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:400;src:url(/static/webfonts/s/dancingscript/v23/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7BMSo3Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Dancing Script;font-style:normal;font-weight:700;src:url(/static/webfonts/s/dancingscript/v23/If2cXTr6YS-zF4S-kcSWSVi_sxjsohD9F50Ruu7B1i03Sup6.woff) format("woff")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMrx.woff2) format("woff2")}@font-face{font-display:swap;font-family:Ledger;font-style:normal;font-weight:400;src:url(/static/webfonts/s/ledger/v16/j8_q6-HK1L3if_sBnMr3.woff) format("woff")}</style><link rel="preconnect" href="https://www.google-analytics.com"/><link rel="dns-prefetch" href="https://www.google-analytics.com"/><link rel="stylesheet"/><script>
    document.addEventListener("DOMContentLoaded", function(event) {
      var hash = window.decodeURI(location.hash.replace('#', ''))
      if (hash !== '') {
        var element = document.getElementById(hash)
        if (element) {
          var scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop
          var clientTop = document.documentElement.clientTop || document.body.clientTop || 0
          var offset = element.getBoundingClientRect().top + scrollTop - clientTop
          // Wait for the browser to finish rendering before scrolling.
          setTimeout((function() {
            window.scrollTo(0, offset - 0)
          }), 0)
        }
      }
    })
  </script><link rel="canonical" href="https://www.romaglushko.com/blog/nature-of-distributed-systems/" data-baseprotocol="https:" data-basehost="www.romaglushko.com"/><link rel="sitemap" type="application/xml" href="/sitemap/sitemap-index.xml"/></head><body><script>
void function() {
  window.__onThemeChange = function() {}

  var preferredTheme
  try {
    preferredTheme = localStorage.getItem('theme')
  } catch (err) { }

  function setTheme(newTheme) {
    if (preferredTheme && document.body.classList.contains(preferredTheme)) {
      document.body.classList.replace(preferredTheme, newTheme)
    } else {
      document.body.classList.add(newTheme)
    }

    window.__theme = newTheme
    preferredTheme = newTheme
    window.__onThemeChange(newTheme)
  }

  window.__setPreferredTheme = function(newTheme) {
    setTheme(newTheme)
    try {
      localStorage.setItem('theme', newTheme)
    } catch (err) {}
  }

  var darkQuery = window.matchMedia('(prefers-color-scheme: dark)')
  darkQuery.addListener(function(e) {
    window.__setPreferredTheme(e.matches ? 'dark' : 'light')
  })

  setTheme(preferredTheme || (darkQuery.matches ? 'dark' : 'light'))
}()
    </script><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><div class="blogpost-header"><div class="view-page-header"><div class="view-page-header-wrapper"><div class="logo-wrapper"><div class="logo"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper gatsby-image-wrapper-constrained logo-img"><div style="max-width:150px;display:block"><img alt="" role="presentation" aria-hidden="true" src="data:image/svg+xml;charset=utf-8,%3Csvg height=&#x27;150&#x27; width=&#x27;150&#x27; xmlns=&#x27;http://www.w3.org/2000/svg&#x27; version=&#x27;1.1&#x27;%3E%3C/svg%3E" style="max-width:100%;display:block;position:static"/></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wgARCAAUABQDASIAAhEBAxEB/8QAGQABAAIDAAAAAAAAAAAAAAAAAAIFAQYH/8QAFgEBAQEAAAAAAAAAAAAAAAAAAwIF/9oADAMBAAIQAxAAAAGco0ELeLtY85wBubgHyP/EABsQAAMAAwEBAAAAAAAAAAAAAAECAwAEBRQj/9oACAEBAAEFAqTuqurthhbOluCeQ3qSMyKJsMTvsflyXPj/AP/EABoRAAICAwAAAAAAAAAAAAAAAAABAgMxMjP/2gAIAQMBAT8BjW2jBVoy/oz/xAAYEQADAQEAAAAAAAAAAAAAAAAAATECEf/aAAgBAgEBPwF04OmYf//EACAQAAMAAQMFAQAAAAAAAAAAAAABAhEDEjEhI1FhcZH/2gAIAQEABj8CdNtk7N3s5Y9GK7jX4ZrNJciqX0ZqZ8spC+n/xAAdEAEBAQEAAQUAAAAAAAAAAAABEQAhMUFRcbHw/9oACAEBAAE/IYcKePO7q7fgmQ5DidTKD2xKdcASfvXUHHTKi6/ZmBcEdAvYt//aAAwDAQACAAMAAAAQ29hA/8QAHBEBAAIBBQAAAAAAAAAAAAAAAQARsSExgZHB/9oACAEDAQE/EKgmr4XiIqncgO/BCcs//8QAGBEAAwEBAAAAAAAAAAAAAAAAAAERMXH/2gAIAQIBAT8QaJGdGRgf/8QAIBABAAICAgEFAAAAAAAAAAAAAQAhEUExcZFRYYHB8P/aAAgBAQABPxBRnkR2vFeYKK8WUBFOV8+ozOxQoyEts4r2CdKb1LTGZiXW+OVxfpCDj47mTsCv77ERW0BumVcABeh+2f/Z" alt=""/><picture><source type="image/avif" data-srcset="/static/7d8b62b999b9a2fb28b8ab360138da37/9c77f/photo3.avif 38w,/static/7d8b62b999b9a2fb28b8ab360138da37/5fe85/photo3.avif 75w,/static/7d8b62b999b9a2fb28b8ab360138da37/7f03a/photo3.avif 150w,/static/7d8b62b999b9a2fb28b8ab360138da37/2caaf/photo3.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" data-srcset="/static/7d8b62b999b9a2fb28b8ab360138da37/43b28/photo3.webp 38w,/static/7d8b62b999b9a2fb28b8ab360138da37/24fe2/photo3.webp 75w,/static/7d8b62b999b9a2fb28b8ab360138da37/6281c/photo3.webp 150w,/static/7d8b62b999b9a2fb28b8ab360138da37/0af71/photo3.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" data-src="/static/7d8b62b999b9a2fb28b8ab360138da37/d0f21/photo3.jpg" data-srcset="/static/7d8b62b999b9a2fb28b8ab360138da37/ef544/photo3.jpg 38w,/static/7d8b62b999b9a2fb28b8ab360138da37/d88db/photo3.jpg 75w,/static/7d8b62b999b9a2fb28b8ab360138da37/d0f21/photo3.jpg 150w,/static/7d8b62b999b9a2fb28b8ab360138da37/4b047/photo3.jpg 300w" alt="Roman Glushko"/></picture><noscript><picture><source type="image/avif" srcSet="/static/7d8b62b999b9a2fb28b8ab360138da37/9c77f/photo3.avif 38w,/static/7d8b62b999b9a2fb28b8ab360138da37/5fe85/photo3.avif 75w,/static/7d8b62b999b9a2fb28b8ab360138da37/7f03a/photo3.avif 150w,/static/7d8b62b999b9a2fb28b8ab360138da37/2caaf/photo3.avif 300w" sizes="(min-width: 150px) 150px, 100vw"/><source type="image/webp" srcSet="/static/7d8b62b999b9a2fb28b8ab360138da37/43b28/photo3.webp 38w,/static/7d8b62b999b9a2fb28b8ab360138da37/24fe2/photo3.webp 75w,/static/7d8b62b999b9a2fb28b8ab360138da37/6281c/photo3.webp 150w,/static/7d8b62b999b9a2fb28b8ab360138da37/0af71/photo3.webp 300w" sizes="(min-width: 150px) 150px, 100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="(min-width: 150px) 150px, 100vw" decoding="async" loading="lazy" src="/static/7d8b62b999b9a2fb28b8ab360138da37/d0f21/photo3.jpg" srcSet="/static/7d8b62b999b9a2fb28b8ab360138da37/ef544/photo3.jpg 38w,/static/7d8b62b999b9a2fb28b8ab360138da37/d88db/photo3.jpg 75w,/static/7d8b62b999b9a2fb28b8ab360138da37/d0f21/photo3.jpg 150w,/static/7d8b62b999b9a2fb28b8ab360138da37/4b047/photo3.jpg 300w" alt="Roman Glushko"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><div class="name"><a href="/blog/" title="back to blog">Roman <!-- --><br/> Glushko<!-- --></a></div></div><h2 class="blog-title"><a href="/blog/" title="back to the homepage">Blog</a></h2></div></div><nav class="main-navigation"><ul><li><a rel="home" title="Go Home" href="/">Home</a></li><li><a title="Go to my Technical Blog" href="/blog/">Blog</a></li><li><a title="Go to my Thoughts" href="/thoughts/">Thoughts</a></li><li><a title="Go to my Lab" href="/lab/">Lab</a></li><li><a title="Review My CVs" href="/cv/machine-learning-engineer/">CV</a></li></ul></nav></div><main><article class="blog-wrapper"><header><figure class="cover"><div class="cover-filter"><div data-gatsby-image-wrapper="" class="gatsby-image-wrapper cover cover-image"><div aria-hidden="true" style="padding-top:66.61458333333333%"></div><img aria-hidden="true" data-placeholder-image="" style="opacity:1;transition:opacity 500ms linear" decoding="async" src="data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAGAAAAwEBAAAAAAAAAAAAAAAAAAIDBAX/xAAWAQEBAQAAAAAAAAAAAAAAAAACAAH/2gAMAwEAAhADEAAAAaPzNdjkAr//xAAcEAACAQUBAAAAAAAAAAAAAAABAgADERIhIjH/2gAIAQEAAQUCtzkYaqiI0HhXf//EABURAQEAAAAAAAAAAAAAAAAAAAAh/9oACAEDAQE/AUf/xAAWEQEBAQAAAAAAAAAAAAAAAAAAITH/2gAIAQIBAT8BxX//xAAaEAACAgMAAAAAAAAAAAAAAAAAARAhETGh/9oACAEBAAY/AsotdLnZ/8QAGxAAAwEAAwEAAAAAAAAAAAAAAAERITFhgcH/2gAIAQEAAT8h7H6KWPgbRHR0fODvRdng/9oADAMBAAIAAwAAABA/H//EABYRAQEBAAAAAAAAAAAAAAAAAAEAEf/aAAgBAwEBPxARsn//xAAXEQEBAQEAAAAAAAAAAAAAAAABABFB/9oACAECAQE/EEZvN//EAB0QAQADAAEFAAAAAAAAAAAAAAEAESFhMUFRgcH/2gAIAQEAAT8QuhN6FU8OJsBcyx31FII61b8hxtVzY7TTzGMVuwT/2Q==" alt=""/><picture><source type="image/webp" data-srcset="/static/95ef24b3227ac9169954fd4efee37f14/57584/marcin-jozwiak-oh0DITWoHi4-unsplash.webp 750w,/static/95ef24b3227ac9169954fd4efee37f14/90a5d/marcin-jozwiak-oh0DITWoHi4-unsplash.webp 1080w,/static/95ef24b3227ac9169954fd4efee37f14/1e947/marcin-jozwiak-oh0DITWoHi4-unsplash.webp 1366w,/static/95ef24b3227ac9169954fd4efee37f14/618ea/marcin-jozwiak-oh0DITWoHi4-unsplash.webp 1920w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" data-src="/static/95ef24b3227ac9169954fd4efee37f14/d5217/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg" data-srcset="/static/95ef24b3227ac9169954fd4efee37f14/7284f/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg 750w,/static/95ef24b3227ac9169954fd4efee37f14/64b93/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg 1080w,/static/95ef24b3227ac9169954fd4efee37f14/2baac/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg 1366w,/static/95ef24b3227ac9169954fd4efee37f14/d5217/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg 1920w" alt="The Nature of Distributed Systems"/></picture><noscript><picture><source type="image/webp" srcSet="/static/95ef24b3227ac9169954fd4efee37f14/57584/marcin-jozwiak-oh0DITWoHi4-unsplash.webp 750w,/static/95ef24b3227ac9169954fd4efee37f14/90a5d/marcin-jozwiak-oh0DITWoHi4-unsplash.webp 1080w,/static/95ef24b3227ac9169954fd4efee37f14/1e947/marcin-jozwiak-oh0DITWoHi4-unsplash.webp 1366w,/static/95ef24b3227ac9169954fd4efee37f14/618ea/marcin-jozwiak-oh0DITWoHi4-unsplash.webp 1920w" sizes="100vw"/><img data-gatsby-image-ssr="" data-main-image="" style="opacity:0" sizes="100vw" decoding="async" loading="lazy" src="/static/95ef24b3227ac9169954fd4efee37f14/d5217/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg" srcSet="/static/95ef24b3227ac9169954fd4efee37f14/7284f/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg 750w,/static/95ef24b3227ac9169954fd4efee37f14/64b93/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg 1080w,/static/95ef24b3227ac9169954fd4efee37f14/2baac/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg 1366w,/static/95ef24b3227ac9169954fd4efee37f14/d5217/marcin-jozwiak-oh0DITWoHi4-unsplash.jpg 1920w" alt="The Nature of Distributed Systems"/></picture></noscript><script type="module">const t="undefined"!=typeof HTMLImageElement&&"loading"in HTMLImageElement.prototype;if(t){const t=document.querySelectorAll("img[data-main-image]");for(let e of t){e.dataset.src&&(e.setAttribute("src",e.dataset.src),e.removeAttribute("data-src")),e.dataset.srcset&&(e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset"));const t=e.parentNode.querySelectorAll("source[data-srcset]");for(let e of t)e.setAttribute("srcset",e.dataset.srcset),e.removeAttribute("data-srcset");e.complete&&(e.style.opacity=1,e.parentNode.parentNode.querySelector("[data-placeholder-image]").style.opacity=0)}}</script></div></div><figcaption class="image-title">Photo by <a href="https://unsplash.com/@marcinjozwiak">Marcin Jozwiak</a> on <a href="https://unsplash.com/s/photos/distribution-center">Unsplash</a></figcaption></figure><h1>The Nature of Distributed Systems</h1><div class="blog-details"><time class="blog-createdat" dateTime="2021-07-20">Jul 20, 2021</time><span> • </span><span class="blog-time2read">9<!-- -->mins<!-- --> read<!-- --></span><div class="theme-switcher"><div class="theme-switcher-toggler"><div class="theme-switcher-track"></div><div class="theme-switcher-thumb"></div><input class="theme-switcher-input" type="checkbox" readonly="" aria-label="Switch between Dark and Light modes"/></div></div></div><ul class="blog-tags"><li>system design</li></ul></header><div class="blog-divider"></div><div id="intro"></div><div class="content-wrapper"><div class="blog-content-nav-wrapper"><ul class="blog-content-nav"><h2>Content</h2><li class=""><a href="#intro">Intro</a></li></ul></div><div class="content blog-content"><p>The Internet evolves rapidly. We started our own hardware servers, moved to managed hostings and now we have entered the era of cloud computing. The ever growing need to handle more and more traffic pushes us beyond the limits.</p>
<p>As a result, it's so natural nowadays to spin off a few instances on AWS or GCP and start building one's own SaaS service that will scale in a way we need. Perhaps, your infrastructure already has load balancing, a couple of nodes or a message queue which means you have already begun with building a distributed system.</p>
<p>But <strong>what do we even know about distributed systems? Are they really different to simple single server setup?</strong></p>
<p>
		<video
			src=https://media.giphy.com/media/2u8vej0S5Mx7W/giphy.mp4
			width="100%"
			height="auto"
			preload="auto"
			muted="true"
			title="Welcome to the real world of distributed systems"
			autoplay
			playsinline
			controls
			loop
		></video>
	</p>
<p>Despite all benefits, I feel like many people <strong>underestimate challenges</strong> that come out of the box with distributed setups. So our goal is to dig into the nature of distributed systems and improve our reasoning about them.</p>
<h2 id="single-server-setup" style="position:relative;"><a href="#single-server-setup" aria-label="single server setup permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Single Server Setup</h2>
<p>The Single server setup is when your application, database and files are served on the same physical or virtual server. It is a reasonable baseline and often you may never need more than that. We work a lot with this kind of system. Even our personal computers may be an example of the single-node systems.</p>
<p>This is probably how we can get in a situation when we tend to apply our single server mental model to think about distributed systems. However, distributed setup is a fundamentally different beast and it has four main differences:</p>
<ul>
<li><strong>Latency</strong> - when we have a single server, it's <strong>CPU power and latency</strong> we worry about. In distributed systems, our main concern is <strong>network latency</strong>.</li>
<li><strong>Memory Access</strong> - in a single server, we have access to the <strong>same memory space</strong>, so it may be easier to write programs that interact with each other. You cannot get direct access from one server to another.</li>
<li><strong>Partial Failures</strong> - both distributed and a single node systems have components that could fail. In the case of a single server, there may be either total failure of the server (OS crashes or failures on the ISP side) or partial failures of the applications installed on the server. Every single component in a distributed setup surely shares these problems. However, they become <strong>undisguisable</strong> from each other. Having more components only <strong>increases the chance that some of them would be affected by some failures</strong>.</li>
</ul>
<p>These few differences are so significant that they effectively change the way we need to think and build distributed systems.</p>
<h2 id="beyond-single-server" style="position:relative;"><a href="#beyond-single-server" aria-label="beyond single server permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Beyond Single Server</h2>
<p>From the brief comparison it becomes clear that the role of the network is crucial in multi-server setups. In order to let services communicate with each other, they expose accessible APIs via standard protocols like:</p>
<ul>
<li>REST</li>
<li>SOAP</li>
<li>RPC</li>
</ul>
<p>This helps to overcome memory access limitations. Communication itself happens via network links and this is where the fun part starts.</p>
<h2 id="unreliable-network" style="position:relative;"><a href="#unreliable-network" aria-label="unreliable network permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Unreliable Network</h2>
<p>The role of the network becomes significant in the distributed systems. The problem is that the network is not a reliable thing.</p>
<p>
		<video
			src=https://media.giphy.com/media/JzzLFXnZt4aiI/giphy.mp4
			width="100%"
			height="auto"
			preload="auto"
			muted="true"
			title="Welcome to the real world of distributed systems"
			autoplay
			playsinline
			controls
			loop
		></video>
	</p>
<p>Requests over the network can fail and there are a lot of reasons for that. Your router may just stop working because of a software or hardware issue, your load balances may drop some requests your database cluster silently or maybe <a href="https://techcrunch.com/2013/03/28/three-men-arrested-for-attempting-to-cut-undersea-internet-cable-in-egypt/" target="_blank" rel="noopener noreferrer">someone just wants to cut your connection cable</a>. Wild nature <a href="https://www.theguardian.com/technology/2014/aug/14/google-undersea-fibre-optic-cables-shark-attacks" target="_blank" rel="noopener noreferrer">doesn't help you either</a>.</p>
<p>In other cases, your hardware may be partially faulty in a way that would slow down the whole nodes that it connects. So troubleshooting becomes time-consuming and painful.</p>
<p>While people work on making networks reliable, there will probably always be a reason that causes the failure.</p>
<p>Even if network links work well, it doesn't mean that we are safe.</p>
<p>Network can be intercepted and the information may be <strong>recorded, modified or fabricated</strong>. This becomes an issue if transmitted information is confidential like PII or CC data.</p>
<h2 id="two-generals" style="position:relative;"><a href="#two-generals" aria-label="two generals permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Two Generals</h2>
<p>Work in an unreliable environment is a common problem of all distributed systems. It's being generally formulated as <strong>Byzantine General’s Problem</strong>.</p>
<p>Imagine there are a few armies with generals that besieged the city they want to capture. In order to successfully perform the campaign, they need to attack the city at the same time. Otherwise, their resources would not be enough and the city army would defeat them.</p>
<p>The only way generals can communicate is via messengers that have to bypass the enemy territory to deliver a message to another general.</p>
<p>
		<video
			src=https://media.giphy.com/media/XBLppkG4DwyKnplu1v/giphy.mp4
			width="100%"
			height="auto"
			preload="auto"
			muted="true"
			title="Consensus"
			autoplay
			playsinline
			controls
			loop
		></video>
	</p>
<p>The situation is complicated as messengers can be intercepted and the message can be fabricated. Also, both messengers and generals can be traitors that are the objective to fail the operation and save the city.</p>
<p>Generals and messengers need to agree on all messages that they send to each other in order to win the battle. This agreement is called <strong>consensus</strong>.</p>
<p>In a context of distributed systems, the consensus is important to synchronize the state of the system when it's distributed among several nodes.</p>
<h2 id="latency-bandwidth-and-transport-cost" style="position:relative;"><a href="#latency-bandwidth-and-transport-cost" aria-label="latency bandwidth and transport cost permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Latency, Bandwidth and Transport Cost</h2>
<p>When two applications communicate on the same server, the communication latency is super small and close to zero. In contrast, communication over the network is a different story.</p>
<p>
		<video
			src=https://media.giphy.com/media/6xE1FNcorRInS/giphy.mp4
			width="100%"
			height="auto"
			preload="auto"
			muted="true"
			title="Latency in Matrix"
			autoplay
			playsinline
			controls
			loop
		></video>
	</p>
<p>Network latency can be <strong>a few orders of magnitude higher</strong> than communication inside of the same memory space. Two computers from different parts of the world are connected via optical cables and the light is used to transmit information. So we seem to be pretty much limited to the speed of the light at this point. All of this tells us that latency is a new and important factor in distributed systems.</p>
<p>Another resource associated with communication over the network is <strong>bandwidth</strong>. Each network connection has a bandwidth limit and you cannot send a larger chunk of data over a unit of time via the network. This is especially important when you deal with file uploading and downloading like in Google Drive, Dropbox or even Netflix where you need to stream high-quality video files for millions of users over the globe.</p>
<p>Latency and bandwidth are two main costs of information transportation. However, there are other ones. For example, you will definitely pay for the whole <strong>network infrastructure</strong> needed to make your communication possible. Even if that cost is hidden in the cloud provider tariffs.</p>
<p>Yet another cost is the CPU resource you spend on <strong>serializing and deserializing</strong> data as well as <strong>the cost of TCP and HTTPS handshakes</strong>. This is the cost we need to pay in order to transfer data between transportation to application layers. The same story goes for when we decide to <strong>compress and decompress</strong> data in order to speed up data transmission and optimize bandwidth.</p>
<p>In order to imagine all of this, let's take a look at <a href="http://www.cs.cornell.edu/projects/ladis2009/talks/dean-keynote-ladis2009.pdf" target="_blank" rel="noopener noreferrer">some measurements</a> that were done in Google data centers a while ago. They still are useful when you compare them:</p>
<ul>
<li>Main memory reference - 100ns</li>
<li>Compress 1KB with Zippy - 10,000ns (10 us)</li>
<li>Read 1 MB sequentially from memory - 250,000ns (250us)</li>
<li>Round trip within the same datacenter - 500,000ns (500 us)</li>
<li>Read 1 MB sequentially from 1 Gbps network - 10,000,000ns (10,000 us or 10 ms)</li>
<li>Read 1 MB sequentially from HDD - 30,000,000ns (30,000us or 30 ms)</li>
<li>Send packet CA -> Netherlands -> CA - 150,000,000ns (150,000us or 150ms)</li>
</ul>
<p>This may be counterintuitive, but in some cases, <strong>network communication may be faster than reading from disk</strong>. Above we see that reading 1MB of data is a few times faster from 1Gbps network than from HDD.</p>
<h2 id="cap-theorem" style="position:relative;"><a href="#cap-theorem" aria-label="cap theorem permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>CAP Theorem</h2>
<p>Network hardware and software are not the only unreliable components. We can easily imagine a situation when some of the connected nodes become faulty because of a broken hard drive or RAM stick. In such cases, there is a part of the distributed system that still works and another part that is failed. These situations are just inevitable.</p>
<p>What can we do about it? We need to manage such failures and build system architectures around this fundamental problem. Such systems are called <strong>fault-tolerant</strong>.</p>
<p><strong>CAP theorem</strong> says that there are two logical ways to respond to the partial failure of the system:</p>
<ul>
<li>keep part of the system outdated but <strong>available</strong> for other clients</li>
<li>lock the system until all nodes become <strong>consistent</strong> after the failure</li>
</ul>
<p><span class="gatsby-resp-image-wrapper" style="position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 680px; ">
      <span class="gatsby-resp-image-background-image" style="padding-bottom: 90.58823529411765%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAIAAADUsmlHAAAACXBIWXMAAAsTAAALEwEAmpwYAAADj0lEQVQ4y22T608iVxTA+eeafmjTT+2mTVPTptvstuliJNvgiwUERkQqgiyvWdaV3frYqiADMiKvARwHZpCHsK4IEaiiICzyWHB4zDSo2Vd7cnM+3JtffufcnMOgPw6KpmiaTpVSxoTREDXo9/RL8SUki1Svqu9e3wXjvyR2gkndUhbIYs4xB5WDTCVz7OXYs/CzQqPwCf8epqj+7WHpUI7KtbhWE9CoMbUaU6t2VepdtTKgXIwukl3yQ/5T83JsWY2r5W65aEM0CU1ObU4BECCxSUAcVOwqYucxmqZ7VO8j+EZbbpZ1OKgldH3YJAI2AMAMTKxNABAAEqASU9iP7P9j7l3DZ/UzENfqCI1qV8VfFQhNIpFJxFvhTsMSMPRkDlNBh9Zr1QdmirqFK62qCn+uCMyrA1olIlP45pR+5Swyp0A180E1uCPxpeBb8zXPuKmg3aOC51fPXzeY7uCAzf6bc1uArj0hdNoQaAgqYNeg1/aDx/x1HuP10mvdWuam1b652aFWkg0RXpHu1bjYybdW15fzS3c2HEyP/S9UilruwIbPoYXPElsDrYCghXFbAUHnHL8t25ptAaGaPNaQRWvy2Ntx9Ph7aPsbi+MnsxVa/hE1feFc/SpiHWgGJzohcbt/gDYh7FWPGQWS5sAJ5sL2g/mtXx6v3tdBf4YqYqL4uy8lMz7e1H9HwHeLflYGHkGe3rdrf/Y8vefS34v+/aDzSs8giu0JtAD4/xF6c0JvVoBkpkPlmUh9NtKwOXUuaPjUJ6TDU82AsOLnlb3cEvLowvPoAuGSuJDhzZNc7wnfkeQ5jgRIhu9M8V0pAD2TRS8tFuki+Gvaw3+DcIoezrmbU/Hz3vi4RQ/n0s+7IgBGuNwZd2fZ64FxW2IUioyY99hGXODJyPabZlhjezmU3xGeOUbjRlZ8bShp/iNhZIVWmDn7SJsQMkqt7kykxnemh434mDXKNuIcODETrkii5JJvG4UevsXFBdf4/tpQxjYcX2ftrw8lTA+LTnY3+aL/2548yUUvhEgG8OVE3qyUKM9Ga9JwbQq/SO4ouhjnGB5NWdnpTXbSws5sjb02Dp46OVSz0Ie7FAXnWuJwfXKvLgnXxaGqiLicJCqu0w7VKpExFYmNt4M8Msjv5wCnE56mqsn340lR9FGlbUw3Fg7qhoO6+biZrXVud6Z71c3vkAcGMq4jX813cnbqqnIzYf8CzLhIMzI8B3kAAAAASUVORK5CYII='); background-size: cover; display: block;"></span>
  <img class="gatsby-resp-image-image" alt="CAP Theorem Visualized" title="CAP Theorem Visualized" src="/static/06bd45aef2a72b7854e9797f2db0e4c2/c5bb3/cap-theorem.png" srcset="/static/06bd45aef2a72b7854e9797f2db0e4c2/04472/cap-theorem.png 170w,
/static/06bd45aef2a72b7854e9797f2db0e4c2/9f933/cap-theorem.png 340w,
/static/06bd45aef2a72b7854e9797f2db0e4c2/c5bb3/cap-theorem.png 680w,
/static/06bd45aef2a72b7854e9797f2db0e4c2/ae694/cap-theorem.png 850w" sizes="(max-width: 680px) 100vw, 680px" style="width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;" loading="lazy" decoding="async">
    </span>
          </p>
<div class="image-title">CAP Theorem Visualized (<a target="_blank" rel="noopener" href="https://www.researchgate.net/figure/Visualization-of-CAP-theorem_fig2_282679529">source</a>)</div>
<p>The most important is that <strong>we cannot pick all three of these attributes: Consistency, Availability and Partial Failure Tolerance</strong>.</p>
<p>Another interesting thing is the <strong>Consistency-Availability</strong> pair. Since partial failures are unavoidable, it's effectively not possible to implement this pair for distributed systems and it should be only possible in the case of a single-server setup.</p>
<p>However, failures don't happen all the time and most of the time the system is in a fully functional state. That's why there is an addition to the CAP theorem called the <strong>PACELC theorem</strong>.</p>
<p>PACELC theorem states that when there are <strong>no partial failures</strong> in the system, then a distributed system can <strong>trade between latency and consistency</strong>. In other words, in case you have a horizontally scaled cluster with a couple of nodes, then you can balance your system latency over consistency by choosing the number of nodes you need to have in sync when change happens. The change may be propagated with <strong>a few nodes right away</strong> and respond to the client after that. The rest of the nodes eventually become synced with this change over time. On the flip side, you can wait until <strong>all nodes</strong> get in sync and only then respond to the client. In the second case, we get a <strong>strongly consistent</strong> system, but with a <strong>higher latency</strong> comparing to the first case.</p>
<p>By choosing the number of nodes we want to have in sync when changes happen, we can specify <strong>the level of consistency</strong> of the system.</p>
<h2 id="at-least-once-delivery" style="position:relative;"><a href="#at-least-once-delivery" aria-label="at least once delivery permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>At Least Once Delivery</h2>
<p>Yet another interesting implication of partial failures is that it's hard to <strong>deliver messages exactly once every time</strong>.</p>
<p>When a client dispatches a message it transmits to the receiver, the receiver persists the message and respond by an acknowledge message back. This is a normal flow.</p>
<p>Let's make it real by adding a partial failure. Now when the client sends a message and doesn't get a response in a reasonable amount of time. Maybe the receiver is down? Or there was a network failure? Or maybe the receiver is just overloaded at this time and slow down with response?</p>
<p>There is no way to distinguish these issues. The message we try to send may be really important like an order fulfilment request. We are better to be safe than sorry. So the client sends out one more message and waits again. We do this until we are sure that the message is received e.g. when we receive an ack message in response.</p>
<p>However, at that point, the receiver may get <strong>several duplicated messages</strong>.</p>
<p>
		<video
			src=https://media.giphy.com/media/l41lRvFQYdlfvDTLG/giphy.mp4
			width="100%"
			height="auto"
			preload="auto"
			muted="true"
			title="At least once delivery"
			autoplay
			playsinline
			controls
			loop
		></video>
	</p>
<p>For this reason, we need to make sure that message workers have business logic that would not make the system state inconsistent in case of message duplications (e.g. customer is being charged a few times for the same order). Sometimes this property is called <strong>idempotency</strong>.</p>
<h2 id="summary" style="position:relative;"><a href="#summary" aria-label="summary permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>Summary</h2>
<p>I hope you noticed that designing distributed systems is a good fit for pessimists, because you always need to expect that system could partially fail at some point.</p>
<p>Other than that, distributed systems have inherited complexity associated with their distributed nature. That's why you need to go building such a system if they are absolutely needed.</p>
<p>The distributed world is all about tradeoffs. You need to know and realize them to successfully build robust distributed systems.</p>
<p>
		<video
			src=https://media.giphy.com/media/3o7btNhMBytxAM6YBa/giphy.mp4
			width="100%"
			height="auto"
			preload="auto"
			muted="true"
			title="Summary"
			autoplay
			playsinline
			controls
			loop
		></video>
	</p>
<h2 id="references" style="position:relative;"><a href="#references" aria-label="references permalink" class="anchor before"><svg class="anchor-icon" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path fill-rule="evenodd" d="M7.775 3.275a.75.75 0 001.06 1.06l1.25-1.25a2 2 0 112.83 2.83l-2.5 2.5a2 2 0 01-2.83 0 .75.75 0 00-1.06 1.06 3.5 3.5 0 004.95 0l2.5-2.5a3.5 3.5 0 00-4.95-4.95l-1.25 1.25zm-4.69 9.64a2 2 0 010-2.83l2.5-2.5a2 2 0 012.83 0 .75.75 0 001.06-1.06 3.5 3.5 0 00-4.95 0l-2.5 2.5a3.5 3.5 0 004.95 4.95l1.25-1.25a.75.75 0 00-1.06-1.06l-1.25 1.25a2 2 0 01-2.83 0z"></path></svg></a>References</h2>
<ul>
<li><a target="_blank" rel="noopener" href="https://www.infoq.com/presentations/distributed-systems-complexity-human-factor/">Why Distributed Systems Are Hard</a></li>
<li><a target="_blank" rel="noopener" href="https://dl.acm.org/doi/pdf/10.5555/974938">A Note on Distributed Computing</a></li>
<li><a target="_blank" rel="noopener" href="https://bravenewgeek.com/you-cannot-have-exactly-once-delivery/">You Cannot Have Exactly-Once Delivery</a></li>
<li><a target="_blank" rel="noopener" href="https://bravenewgeek.com/understanding-consensus/">Understanding Consensus</a></li>
<li><a target="_blank" rel="noopener" href="https://levelup.gitconnected.com/practical-understanding-of-flp-impossibility-for-distributed-consensus-8886e73cdfe5">Practical Understanding of FLP Impossibility for Distributed Consensus</a></li>
</ul></div></div><div id="content-end"></div></article><div class="social-share-wrapper"><h3>Share Your Love</h3><button keywords="" aria-label="Share Via Facebook" title="Share Via Facebook" class="react-share__ShareButton social-share-item facebook" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="facebook" class="svg-inline--fa fa-facebook " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M504 256C504 119 393 8 256 8S8 119 8 256c0 123.8 90.69 226.4 209.3 245V327.7h-63V256h63v-54.64c0-62.15 37-96.48 93.67-96.48 27.14 0 55.52 4.84 55.52 4.84v61h-31.28c-30.8 0-40.41 19.12-40.41 38.73V256h68.78l-11 71.69h-57.78V501C413.3 482.4 504 379.8 504 256z"></path></svg></button><button keywords="" aria-label="Share Via Twitter" class="react-share__ShareButton social-share-item twitter" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"></path></svg></button><button aria-label="Share Via LinkedIn" keywords="" class="react-share__ShareButton social-share-item linkedin" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.3 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.6 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.3 61.9 111.3 142.3V448z"></path></svg></button><button keywords="" aria-label="Share Via Reddit" class="react-share__ShareButton social-share-item reddit" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="reddit" class="svg-inline--fa fa-reddit " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M201.5 305.5c-13.8 0-24.9-11.1-24.9-24.6 0-13.8 11.1-24.9 24.9-24.9 13.6 0 24.6 11.1 24.6 24.9 0 13.6-11.1 24.6-24.6 24.6zM504 256c0 137-111 248-248 248S8 393 8 256 119 8 256 8s248 111 248 248zm-132.3-41.2c-9.4 0-17.7 3.9-23.8 10-22.4-15.5-52.6-25.5-86.1-26.6l17.4-78.3 55.4 12.5c0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.3 24.9-24.9s-11.1-24.9-24.9-24.9c-9.7 0-18 5.8-22.1 13.8l-61.2-13.6c-3-.8-6.1 1.4-6.9 4.4l-19.1 86.4c-33.2 1.4-63.1 11.3-85.5 26.8-6.1-6.4-14.7-10.2-24.1-10.2-34.9 0-46.3 46.9-14.4 62.8-1.1 5-1.7 10.2-1.7 15.5 0 52.6 59.2 95.2 132 95.2 73.1 0 132.3-42.6 132.3-95.2 0-5.3-.6-10.8-1.9-15.8 31.3-16 19.8-62.5-14.9-62.5zM302.8 331c-18.2 18.2-76.1 17.9-93.6 0-2.2-2.2-6.1-2.2-8.3 0-2.5 2.5-2.5 6.4 0 8.6 22.8 22.8 87.3 22.8 110.2 0 2.5-2.2 2.5-6.1 0-8.6-2.2-2.2-6.1-2.2-8.3 0zm7.7-75c-13.6 0-24.6 11.1-24.6 24.9 0 13.6 11.1 24.6 24.6 24.6 13.8 0 24.9-11.1 24.9-24.6 0-13.8-11-24.9-24.9-24.9z"></path></svg></button><button keywords="" aria-label="Add to Pocket" class="react-share__ShareButton social-share-item pocket" style="background-color:transparent;border:none;padding:0;font:inherit;color:inherit;cursor:pointer"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="get-pocket" class="svg-inline--fa fa-get-pocket " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M407.6 64h-367C18.5 64 0 82.5 0 104.6v135.2C0 364.5 99.7 464 224.2 464c124 0 223.8-99.5 223.8-224.2V104.6c0-22.4-17.7-40.6-40.4-40.6zm-162 268.5c-12.4 11.8-31.4 11.1-42.4 0C89.5 223.6 88.3 227.4 88.3 209.3c0-16.9 13.8-30.7 30.7-30.7 17 0 16.1 3.8 105.2 89.3 90.6-86.9 88.6-89.3 105.5-89.3 16.9 0 30.7 13.8 30.7 30.7 0 17.8-2.9 15.7-114.8 123.2z"></path></svg></button></div></main><aside class="blogpost-sidebar"><div class="blog-navigation-wrapper"><h3>Read Other Posts</h3><nav class="blog-navigation"><div class="nav-links"><a rel="next" class="next-post" href="/blog/design-lru-cache/">Design LRU Cache<!-- --> →<!-- --></a><a rel="prev" class="prev-post" href="/blog/communicate-through-code/">← <!-- -->Communicate Through Code<!-- --></a><a class="all-posts" href="/blog/">All Posts</a></div></nav></div></aside><footer><div class="footer-wrapper"><div class="social"><ul class="social-list"><li class="social-item social-linkedin"><a rel="me" itemProp="url" href="https://www.linkedin.com/in/glushko-roman" title="Roman Glushko on LinkedIn" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="linkedin-in" class="svg-inline--fa fa-linkedin-in fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M100.3 448H7.4V148.9h92.88zM53.79 108.1C24.09 108.1 0 83.5 0 53.8a53.79 53.79 0 0 1 107.6 0c0 29.7-24.1 54.3-53.79 54.3zM447.9 448h-92.68V302.4c0-34.7-.7-79.2-48.29-79.2-48.29 0-55.69 37.7-55.69 76.7V448h-92.78V148.9h89.08v40.8h1.3c12.4-23.5 42.69-48.3 87.88-48.3 94 0 111.3 61.9 111.3 142.3V448z"></path></svg><span>LinkedIn</span></a></li><li class="social-item social-github"><a rel="me" itemProp="url" href="https://github.com/roma-glushko" title="Roman Glushko on Github" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="github-alt" class="svg-inline--fa fa-github-alt fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 480 512"><path fill="currentColor" d="M186.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1zM480 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2zm-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3zm-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1z"></path></svg><span>GitHub</span></a></li><li class="social-item social-email"><a itemProp="email" href="mailto:roman.glushko.m@gmail.com" title="Roman Glushko&#x27;s Email"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="envelope" class="svg-inline--fa fa-envelope fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M464 64C490.5 64 512 85.49 512 112C512 127.1 504.9 141.3 492.8 150.4L275.2 313.6C263.8 322.1 248.2 322.1 236.8 313.6L19.2 150.4C7.113 141.3 0 127.1 0 112C0 85.49 21.49 64 48 64H464zM217.6 339.2C240.4 356.3 271.6 356.3 294.4 339.2L512 176V384C512 419.3 483.3 448 448 448H64C28.65 448 0 419.3 0 384V176L217.6 339.2z"></path></svg><span>Email</span></a></li><li class="social-item social-kaggle"><a rel="me" itemProp="url" href="https://www.kaggle.com/glushko" title="Roman Glushko on Kaggle" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="kaggle" class="svg-inline--fa fa-kaggle fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentColor" d="M304.2 501.5L158.4 320.3 298.2 185c2.6-2.7 1.7-10.5-5.3-10.5h-69.2c-3.5 0-7 1.8-10.5 5.3L80.9 313.5V7.5q0-7.5-7.5-7.5H21.5Q14 0 14 7.5v497q0 7.5 7.5 7.5h51.9q7.5 0 7.5-7.5v-109l30.8-29.3 110.5 140.6c3 3.5 6.5 5.3 10.5 5.3h66.9q5.25 0 6-3z"></path></svg><span>Kaggle</span></a></li><li class="social-item social-twitter"><a rel="me" itemProp="url" href="https://twitter.com/roma_glushko" title="Roman Glushko on Twitter" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="twitter" class="svg-inline--fa fa-twitter fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"></path></svg><span>Twitter</span></a></li><li class="social-item social-patreon"><a rel="me" itemProp="url" href="https://www.patreon.com/roma_glushko" title="Support my content on Patreon" target="blank"><svg aria-hidden="true" focusable="false" data-prefix="fab" data-icon="patreon" class="svg-inline--fa fa-patreon fa-2x " role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M512 194.8c0 101.3-82.4 183.8-183.8 183.8-101.7 0-184.4-82.4-184.4-183.8 0-101.6 82.7-184.3 184.4-184.3C429.6 10.5 512 93.2 512 194.8zM0 501.5h90v-491H0v491z"></path></svg><span>Patreon</span></a></li></ul></div><div class="copyright">Roman Glushko © 1996 - <!-- -->2022<!-- --> <!-- --><br/><a rel="license" href="https://creativecommons.org/licenses/by/4.0/" title="Content is published under CC BY 4.0 license">CC BY 4.0</a></div><div class="pgp"><a href="https://keybase.io/roman_hlushko">AB49 B91C C3E5 8E73</a></div></div></footer></div></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script>
  
  function gaOptout(){document.cookie=disableStr+'=true; expires=Thu, 31 Dec 2099 23:59:59 UTC;path=/',window[disableStr]=!0}var gaProperty='UA-148139633-1',disableStr='ga-disable-'+gaProperty;document.cookie.indexOf(disableStr+'=true')>-1&&(window[disableStr]=!0);
  if(true) {
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  }
  if (typeof ga === "function") {
    ga('create', 'UA-148139633-1', 'auto', {"alwaysSendReferrer":true});
      ga('set', 'anonymizeIp', true);
      
      
      
      
      }</script><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/blog/nature-of-distributed-systems/";window.___webpackCompilationHash="279fc644054fd7550b66";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-064e40927cb715fa1977.js"],"app":["/app-0ef8a67f38bd78c46a45.js"],"component---cache-caches-gatsby-plugin-offline-app-shell-js":["/component---cache-caches-gatsby-plugin-offline-app-shell-js-74d8c297c3ba1f8acc82.js"],"component---src-pages-404-tsx":["/component---src-pages-404-tsx-14664c81c5632504193e.js"],"component---src-pages-blog-js":["/component---src-pages-blog-js-c2f2a372059b90bfaaf2.js"],"component---src-pages-cv-ecommerce-developer-js":["/component---src-pages-cv-ecommerce-developer-js-e8d2a40dd1710464b99f.js"],"component---src-pages-cv-machine-learning-engineer-js":["/component---src-pages-cv-machine-learning-engineer-js-b5ef7266662a797e9e8d.js"],"component---src-pages-index-tsx":["/component---src-pages-index-tsx-1652a13ce8f2b39c814f.js"],"component---src-pages-lab-js":["/component---src-pages-lab-js-d68a864a61ca2fb2e7f7.js"],"component---src-pages-lab-rock-paper-scissors-index-js":["/component---src-pages-lab-rock-paper-scissors-index-js-dc4668c3fdcd81610c2f.js"],"component---src-pages-nn-design-js":["/component---src-pages-nn-design-js-348e2aaffd4c9b6826d2.js"],"component---src-pages-thoughts-js":["/component---src-pages-thoughts-js-3946a46f2af9aa10d132.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-35a6aaed5223f1bf3303.js"],"component---src-templates-thought-template-js":["/component---src-templates-thought-template-js-86147de8587534c94fe7.js"]};/*]]>*/</script><script src="/polyfill-064e40927cb715fa1977.js" nomodule=""></script><script src="/app-0ef8a67f38bd78c46a45.js" async=""></script><script src="/framework-b612e2e8157cfc7500f3.js" async=""></script><script src="/webpack-runtime-1b616b0d514326cfaed6.js" async=""></script></body></html>